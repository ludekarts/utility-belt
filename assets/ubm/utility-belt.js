function e(e){return!!e&&"symbol"!=typeof e&&"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e&&"function"!=typeof e&&!Array.isArray(e)}function t(e,o){if(void 0===e)return o;if(void 0===o)return e;if(null===e)return o;if(null===o)return o;var i=Object.keys(o),a=Object.keys(e),u=i.concat(a.filter(function(e){return!i.includes(e)}));return u.length?u.reduce(function(i,a){var u=o[a],s=e[a];return i[a]=n(u)?void 0===u?s:u:Array.isArray(s)||Array.isArray(u)?r(s,u):u instanceof RegExp?RegExp(u.source,u.flags):t(s,u),i},{}):e}function r(e,o){if(Array.isArray(e)&&Array.isArray(o)){for(var i=e.length,a=o.length,u=[],s=0;s<i||s<a;s++)u[s]=n(o[s])?void 0===o[s]?e[s]:o[s]:Array.isArray(e[s])||Array.isArray(o[s])?r(e[s],o[s]):t(e[s],o[s]);return u}return o}function n(e){return["string","number","boolean","symbol","function","undefined"].includes(typeof e)}function o(e){return e.map(function(e){return Array.isArray(e)?o(e):a(e)?e:i(e)})}function i(e){return Object.keys(e).reduce(function(t,r){if(e.hasOwnProperty(r)){var n=e[r];t[r]=a(n)?n:Array.isArray(n)?o(n):Object.assign({},n)}return t},{})}function a(e){return null===e||["string","number","symbol","boolean","function","undefined"].includes(typeof e)}function u(e,t){var r=document.createElement("style");return t&&(r.dataset.styleName=t),document.head.appendChild(r).textContent=e,r}function s(e){for(var t=[],r=-1,n=e.length;++r!==n;t[r]=e[r]);return t}function c(e,t){for(var r=0,n=e.length;r<n;)t(e[r],r,e),r++}function f(e,t){return e.toLowerCase().includes(t.toLowerCase())}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=["mode","body","cache","method","redirect","credentials","referrerPolicy"],h=["fallback","requestHash","cacheRequests","useErrorWrapper","doNotParseResponse"],v=function(){function t(t){if(this.native={},this.headers={},this.requestConfig={},this.responseProcessor=[],!e(t)){if(Boolean(t))throw new Error("Config argument should be Undefuned or an Object");return this}for(var r in t)t.hasOwnProperty(r)&&void 0!==t[r]&&this.update(r,t[r]);Object.freeze(this.native),Object.freeze(this.headers),Object.freeze(this.requestConfig),Object.freeze(this.responseProcessor)}var r=t.prototype;return r.__updateResponseProcessor=function(e,t){if("function"==typeof t)e.responseProcessor=[t];else{if(!Array.isArray(t))throw new Error("ResponseProcessor should be Undefined. In other case it should return a Function or an Array");e.responseProcessor=t}},r.__updateHeaders=function(t,r){if("function"==typeof r)t.headers=r(l({},t.headers));else{if(!e(r))throw new Error("Headers property should be an Object");t.headers=l({},r)}},r.update=function(e,t){"responseProcessor"===e?this.__updateResponseProcessor(this,t):"headers"===e?this.__updateHeaders(this,t):p.includes(e)?this.requestConfig[e]=t:h.includes(e)&&(this.native[e]=t)},r.merge=function(e){if(!e)return this;if(!(e instanceof t))throw new Error("Configuration object should be instace of RequestConfig");return new t(l({},this.requestConfig,e.requestConfig,{headers:l({},this.headers,e.headers||{})},this.native,e.native,{responseProcessor:[].concat(this.responseProcessor,e.responseProcessor||[])}))},t}();function m(t,r){void 0===r&&(r={});var n=r["content-type"]||r["Content-Type"];if(t)return"application/json"===n||"text/plain"===n?JSON.stringify(t):"application/x-www-form-urlencoded"===n&&e(t)?new URLSearchParams(t):e(t)?y(t):JSON.stringify(t)}function y(e){var t=new FormData;return Object.keys(e).forEach(function(r){var n,o="string"==typeof(n=e[r])||"number"==typeof n||"boolean"==typeof n?e[r]:JSON.stringify(e[r]);t.append(r,o)}),t}var g={isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},object:function(t){return e(t)},array:function(e){return Array.isArray(e)},number:function(e){return"number"==typeof e},string:function(e){return"string"==typeof e},symbol:function(e){return"symbol"==typeof e},boolean:function(e){return"boolean"==typeof e},matches:function(e){return function(t){return e.test(t)}},objectOf:function(t){return function(r){return e(r)&&{value:r,schema:t}}},arrayOf:function(e){return function(t){return Array.isArray(t)&&{value:t,schema:e}}}};function b(e){return e&&e.length?(0===e.indexOf("?")?e.slice(1):e).split("&").reduce(function(e,t){var r=t.split("="),n=r[0],o=decodeURIComponent(r[1]);return e[n]?Array.isArray(e[n])?e[n].push(o):e[n]=[e[n],o]:e[n]=o,e},{}):{}}function x(e,t,r){var n,o,i;if(void 0===r?(n="/",o=e,i=t):(n=e,o=t,i=r),"string"!=typeof n)throw new Error("PubSub Error: namespace should be a string");if("string"!=typeof o)throw new Error("PubSub Error: subscribe event should be a string");if("function"!=typeof i)throw new Error("PubSub Error: the observer should be a function");return{namespace:n,event:o,observer:i}}function A(e,t,r){return""+e.slice(0,r)+t+e.slice(r,e.length)}var w=function(){var e=new Map,t=new WeakMap;function r(e){return Array.isArray(e)||"function"==typeof e||"string"==typeof e||"number"==typeof e||"symbol"==typeof e}return Object.freeze({set:function(n,o){return r(n)?e.set(n,o):t.set(n,o)},has:function(n){return r(n)?e.has(n):t.has(n)},get:function(n){return r(n)?e.get(n):t.get(n)},remove:function(n){return r(n)?e.delete(n):t.delete(n)},trace:function(){console.log("String-as-key Store:\n",e),console.log("Object-as-key Store:\n",t)}})}(),E=new WeakMap;function C(e){var t=void 0!==e&&Boolean(e.raw);if(t){var r=j(e,S([].slice.call(arguments,1))),n=r.element;return n}return function(t){var r=[].slice.call(arguments,1),n=e;if(null==n||!0===n||!1===n)throw new Error("HTML Template Error: html() helper requires unique ID if called as function. Got "+n);if(w.has(n)){var o=w.get(n),i=o.element,a=o.elementBindings;return N(a,S(r)),i}if(!w.has(n)){var u=j(t,S(r)),s=u.element,c=u.elementBindings,f=P(s);return w.set(n,{element:s,elementBindings:c}),f&&E.set(s,f),s}}}function O(e,t){return void 0!==t?"function"==typeof t?t(e):t:e}function j(e,t){var r=[],n=document.createElement("div"),o=e.reduce(function(e,n,o){var i=t[o],a=e+=n,u={value:i,index:o};if(function(e){return e.lastIndexOf("<")>e.lastIndexOf(">")}(a)){var s=a.lastIndexOf("<"),c=a.slice(0,s),f=a.slice(s);if(a=f.includes("data-hook")?c+f.replace(/data-hook="(.+?)"/,function(e,t){return'data-hook="'+t+" "+o+'"'}):c+A(f,' data-hook="'+o+'"',f.indexOf(" ")),/ \?.+="$/.test(f)){var l=a.lastIndexOf("?");u.bool=a.slice(l+1,a.lastIndexOf("=")),a=a.slice(0,l)+a.slice(l+1),i=""}else i="%#"+o+"#%"}else i=R(i)?'<i data-hook="'+o+'" data-hte="true"></i>':Array.isArray(i)?'<i data-hook="'+o+'" data-lst="true"></i>':T(i)?'<i data-hook="'+o+'" data-ref="true"></i>':"";return r.push(u),a+(i||"")},"");return n.insertAdjacentHTML("beforeend",o),c(s(n.querySelectorAll("[data-hook]")),function(e){c(e.dataset.hook.split(" "),function(t){var n=r[t];if(e.dataset.ref)n.type="text",n.ref=document.createTextNode(n.value),e.parentNode.replaceChild(n.ref,e);else if(e.dataset.hte)n.type="node",e.parentNode.replaceChild(n.value,e);else if(e.dataset.lst){var o=e.parentNode;n.type="list",n.parent=o,L(n.value,e,o)}else if(n.ref=e,n.type="attribute",n.bool)n.value?e.setAttribute(n.bool,n.bool):e.removeAttribute(n.bool);else{if(!T(n.value))throw new Error('Only String and Numbers can be passedt to the attributes, got: "'+typeof n.value+'" at "'+t+'" value.');var i=function(e,t){var r=Array.prototype.slice.call(t.attributes).find(function(t){return new RegExp("%#"+e+"#%").test(t.value)});return{name:r.name,template:r.value}}(t,e);n.attribute=i,e.setAttribute(i.name,i.template.replace(new RegExp("%#"+t+"#%"),n.value))}e.removeAttribute("data-hook")})}),{element:function(e){return 1===e.children.length?e.children[0]:e}(n),elementBindings:r}}function N(e,t){c(t,function(t,r){t!==e[r].value&&function(e,t){if(e){if("attribute"===e.type)if(e.bool)t?e.ref.setAttribute(e.bool,e.bool):e.ref.removeAttribute(e.bool);else{if(!T(t))throw new Error('Only String and Numbers can be passed to the attributes, got: "'+typeof t+'" at "'+e.index+'" value.');e.ref.setAttribute(e.attribute.name,e.attribute.template.replace(new RegExp("%#"+e.index+"#%"),t))}else if("text"===e.type){if(T(t))e.ref.textContent=t;else if(R(t))e.type="node",e.ref.parentNode.replaceChild(t,e.ref);else if(Array.isArray(t)){var r=e.ref.parentNode;e.type="list",e.parent=r,L(t,e.ref,r)}}else if("node"===e.type){if(T(t)){var n=document.createTextNode(t);e.type="text",e.ref=n,e.value.parentNode.replaceChild(n,e.value)}else if(R(t))e.value.parentNode.replaceChild(t,e.value);else if(Array.isArray(t)){var o=e.value.parentNode;e.type="list",e.parent=o,L(t,e.value,o)}}else if("list"===e.type)if(T(t)){var i=document.createTextNode(t);e.type="text",e.ref=i,e.parent.insertBefore(i,e.value[0]),c(e.value,function(e){return e.remove()}),e.parent=void 0}else if(R(t))e.type="node",e.parent.insertBefore(t,e.value[0]),c(e.value,function(e){return e.remove()}),e.parent=void 0;else if(Array.isArray(t)){var a=[];c(e.value,function(e){t.includes(e)?a.push(e):e.remove()}),e.value=a,c(t,function(t,r){var n=e.value[r];n!==t&&(void 0===n?e.parent.appendChild(t):n.parentNode.replaceChild(t,n))})}e.value=t}}(e[r],t)})}function P(e){var t={},r=s(e.querySelectorAll("[ref]"));return c(r,function(e){var r=e.getAttribute("ref");t[r]=e,e.removeAttribute("ref")}),r.length?Object.freeze(t):void 0}function S(e){return e.map(function(e){return"string"==typeof e?q(e):e})}function T(e){return void 0!==e&&("number"==typeof e||"string"==typeof e)}function R(e){return e instanceof HTMLElement||e instanceof Text}function L(e,t,r){c(e,function(e){R(e)&&r.insertBefore(e,t)}),t.remove()}function q(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return e.replace(/[&<>'"]/g,function(e){return t[e]})}C.refs=function(e){if(e instanceof HTMLElement)return E.get(e)||{};throw new Error("HTML Template Error: refs() helper should be called with an HTMLElement")},C.destroy=function(e){var t=w.get(e);return E.delete(t.element),w.remove(e)},exports.PubSub=function(e){var t=new Map,r=e&&!0===e.debug,n="function"==typeof e.logger?e.logger:void 0;t.set("/",new Map);var o=Object.freeze({on:function(e,i,a){var u=x(e,i,a),s=u.namespace,c=u.event,f=u.observer;t.has(s)||t.set(s,new Map);var l=t.get(s);return l.has(c)||l.set(c,[]),l.get(c).push(f),r&&n&&n('A new subscription "'+c+'" was added to namespace "'+s+'".'),o},off:function(e,r,n){var i=x(e,r,n),a=i.namespace,u=i.event,s=i.observer;if(t.has(a)){var c=t.get(a);if(c.has(u)){var f=c.get(u),l=f.indexOf(s);~l&&(f.splice(l,1),f.length?c.set(u,f):(c.delete(u),0===c.size&&"/"!==a&&t.delete(a)))}}return o},dispatch:function(e,i,a){var u=function(e,t,r){var n,o,i;return void 0===r?(n="/",o=e,i=t):(n=e,o=t,i=r),{namespace:n,event:o,message:i}}(e,i,a),s=u.namespace,c=u.event,f=u.message;if(t.has(s)){var l=t.get(s);if(l.has(c)){for(var d=l.get(c),p=d.length,h=0;h<p;h++)d[h](f,c);r&&n&&n("published",{namespace:s,event:c,message:f,observersList:d})}else r&&console.warn('Event "'+c+'" does not exist in "'+s+'" namespace.')}return o},getNamespace:function(e,n){if(void 0===n&&(n=!1),r)return n?("/"!==e&&t.delete(e),t):e?t.get(e):t}});return o},exports.RequestConfig=v,exports.arrayToObject=function(e,t){return e.reduce(function(e,r){return e[r[t]]=r,e},{})},exports.attachStyle=u,exports.base64=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},exports.checkSchema=function t(r,n,o){if(void 0===o&&(o={}),"function"==typeof n){var i=n(r);if(Array.isArray(i.value))return i.value.every(function(e){return Array.isArray(i.schema)?i.schema.some(function(r){return t(e,r,{silent:!0})}):t(e,i.schema)});if(e(i.schema))return Object.keys(i.schema).every(function(e){if(void 0===i.value[e])throw new Error('Missing property "'+e+'"');return t(i.value[e],i.schema[e])});if(!1===i){if(o.silent)return!1;throw console.error("Mismatch value:",r),new Error('Value "'+r+'" does not match schema type.')}return!0}throw new Error('Incorrect schema type. Got "'+typeof n+'" instead of schema-type function.')},exports.chunksArray=function(e,t){for(var r=0,n=e.length,o=[];r<n;r+=t)o.push(e.slice(r,r+t));return o},exports.clipboard=function(){var e=document.getElementById("_clipContainer_")||document.createElement("textarea");return e.id||(e.id="_clipContainer_",e.style.opacity=0,e.style.position="fixed",e.style.pointerEvents="none",document.body.appendChild(e)),function(t){try{return e.value=t,e.select(),document.execCommand("copy"),t}catch(e){return void console.error(e)}}},exports.compareArrays=function(e,t){return{added:t.filter(function(t){return!~e.indexOf(t)}),removed:e.filter(function(e){return!~t.indexOf(e)})}},exports.component=function(e,t){var r={},n=t,o={component:Date.now()+Math.random()};return r.element=e(t,o),r.refs=C.refs(r.element),r.render=function(t){var r=O(n,t),i=e(r,o);return n=r,i},r.install=function(e){return e.apply(void 0,[r].concat([].slice.call(arguments,1)))},r.destroy=function(){C.destroy(o),r.element.remove(),r.install=void 0,r.element=void 0,r.render=void 0,r.remove=void 0,r.refs=void 0,r=void 0,o=void 0,n=void 0},r},exports.copyAttrs=function(e,t,r){void 0===r&&(r=[]),Array.from(e.attributes||[]).forEach(function(e){return!~r.indexOf(e.name)&&t.setAttribute(e.name,e.value)})},exports.createElement=function(e,t){var r=e.match(/[\w-:]+=".+?"/g);r&&(r=r.map(function(e){return function(e,t){return[e.substring(0,t),e.substring(t+1)]}(e.replace(/"/g,""),e.indexOf("="))}));var n,o=~e.indexOf("[")?e.slice(0,e.indexOf("[")):e,i=~o.indexOf(".")?o.split("."):[o],a=i[0];if(i.length>0&&(i=i.slice(1,i.length).join(" ")),~a.indexOf("#")){var u=a.split("#");a=u[0],n=u[1]}var s=document.createElement(a);return n&&(s.id=n),t&&("string"==typeof t?s.innerHTML=t:t instanceof HTMLElement&&s.appendChild(t)),r&&r.forEach(function(e){return s.setAttribute(e[0],e[1])}),i&&(s.className=i),s},exports.createEventHandler=function(e,t,r,n){return void 0===n&&(n=!1),e.addEventListener(t,r,n),function(){return e.removeEventListener(t,r,n)}},exports.createRequest=function(e){if(e&&!(e instanceof v))throw new Error("Configuration object should be instace of RequestConfig");var t=new Map,r=new Map,n=e||new v;function o(e,o){var i=n.merge(o),a=i.native,u=i.requestConfig,s=i.headers,c=i.responseProcessor,f=""+e+(a.requestHash||""),d=a.cacheRequests&&r.has(f);if(d)return function(e,t){return Promise.resolve(e.get(t))}(r,f);var p=new AbortController,h=function(e){return t.delete(v),e},v=fetch(e,l({},u,{headers:s,signal:p.signal})).then(h).then(function(e){return a.doNotParseResponse?e:function(e,t,r){void 0===r&&(r=!1);try{var n,o=function(){if(e.ok)return n;if(t)return t;throw r?{response:n,status:e.status,statusText:e.statusText}:n},i=e.headers.get("content-type").split(";")[0],a=function(){if(/^text\//.test(i))return Promise.resolve(e.text()).then(function(e){n=e});var t=function(){if(/^image\//.test(i))return Promise.resolve(e.blob()).then(function(e){n=e});var t=function(){if("application/json"===i)return Promise.resolve(e.json()).then(function(e){n=e});var t=function(){if("multipart/form-data"===i)return Promise.resolve(e.formData()).then(function(e){n=e});console.warn("Not recognized content-type: "+e.headers.get("content-type")),n=e}();return t&&t.then?t.then(function(){}):void 0}();return t&&t.then?t.then(function(){}):void 0}();return t&&t.then?t.then(function(){}):void 0}();return Promise.resolve(a&&a.then?a.then(o):o())}catch(e){return Promise.reject(e)}}(e,a.fallback,a.useErrorWrapper)}).then(function(e){return a.cacheRequests?function(e,t,r,n){var o=Boolean(n)?n.reduce(function(e,t){return t(e)},e):e;return r.set(t,o),o}(e,f,r,c):c?c.reduce(function(e,t){return t(e)},e):e}).catch(function(e){return function(t){throw e(),t}}(h));return!d&&t.set(v,function(){return p.abort()}),v}return{get:function(e,t){if(t&&!(t instanceof v))throw new Error("Configuration object should be instace of RequestConfig");var r=new v({method:"GET"});return o(e,t?t.merge(r):r)},post:function(e,t,r){var n=function(e,t){return{bodyContent:!t||t instanceof v?!e||e instanceof v?void 0:e:t,configuration:e instanceof v?e:t instanceof v?t:void 0}}(t,r),i=n.configuration,a=n.bodyContent;if(i&&!(i instanceof v))throw new Error("Configuration object should be instace of RequestConfig");var u=new v({method:"POST",body:m(a,null==i?void 0:i.headers)});return o(e,i?i.merge(u):u)},abort:function(e){t.has(e)&&(t.get(e)(),t.delete(e))},request:o,releaseCache:function(e,t){if(void 0===t&&(t=""),"string"!=typeof t)throw new Error("RequestHash need to be a string");var n=e?e instanceof RegExp?e:""+e+t:null;if("string"==typeof n)r.delete(n);else if(n instanceof RegExp)for(var o,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e))){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(r.keys());!(o=i()).done;){var a=o.value;n.test(a)&&r.delete(a)}else r.clear()},updateConfig:function(e){for(var t in e)e.hasOwnProperty(t)&&n.update(t,e[t])}}},exports.debounce=function(e,t,r){var n;return function(){var o=[].slice.call(arguments),i=function(){n=null,!r&&e.apply(void 0,o)};clearTimeout(n),n=setTimeout(i,t),r&&!n&&e.apply(void 0,o)}},exports.debugElementsStore=function(){w.trace(),console.log("Elements references:",E)},exports.deepCopy=function(e){return a(e)?e:Array.isArray(e)?o(e):i(e)},exports.deepOverride=function(e,o){return n(o)?void 0===o?e:o:Array.isArray(o)||Array.isArray(e)?r(e,o):t(e,o)},exports.deriveNewState=O,exports.domFilter=function(e){var t=e.extractContent,r=e.uiRender,n=e.matchFn,o=void 0===n?f:n,i=e.matchIfEmptyPhrase,a=void 0===i||i,c=s(document.querySelectorAll(e.selector)).reduce(function(e,r){return!a&&r.classList.add("dom-filter-match"),e.push({text:t?t(r,index):r.textContent,ref:r}),e},[]);u("\n    .dom-filter-match {\n      display: none;\n    }\n  ");var l={},d=c.length;return function(e){for(var t=0;t<d;t++){var n=c[t];(e.length||a)&&o(n.text,e,c)?(n.ref.classList.remove("dom-filter-match"),r&&r(n,e,l)):n.ref.classList.add("dom-filter-match")}return c}},exports.elFromString=function(e){return document.createRange().createContextualFragment(e)},exports.escapeHtml=q,exports.events=function(e){var t={},r=function(e){return function(r){if(r.target.dataset[e]){var n=t[r.target.dataset[e]];n&&n(r)}}};[].slice.call(arguments,1).forEach(function(t){e.addEventListener(t,r(t))});var n=function(e,r){t[e]||(t[e]=r)},o=function(e,r){t[e](r)};return Object.freeze({add:n,callHandler:o})},exports.extractNodes=function e(t){if(0===t.childNodes.length)return t.remove();t.parentNode.insertBefore(t.firstChild,t),e(t)},exports.fuzzySearch=function(e,t){var r=t.length,n=e.length;if(n>r)return!1;if(n===r)return e===t;e:for(var o=0,i=0;o<n;o++){for(var a=e.charCodeAt(o);i<r;)if(t.charCodeAt(i++)===a)continue e;return!1}return!0},exports.getNodesPath=function(e){if(!e)throw new Error("getNodesPath error: stopSelector is required");return function t(r,n){return void 0===n&&(n=[r]),r.parentNode.matches(e)?n:(n.push(r.parentNode),t(r.parentNode,n))}},exports.getRandomNumber=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},exports.getRandomSubarray=function(e,t){for(var r,n,o=e.slice(0),i=e.length,a=i-t;i-- >a;)r=o[n=Math.floor((i+1)*Math.random())],o[n]=o[i],o[i]=r;return o.slice(a)},exports.hashCode=function(e){return e.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0)},exports.highlight=function(e,t){if(!t.length)return e;for(var r,n=[],o=function(e){var t=e.split(","),r=t.length>1?t.reduce(function(e,t){var r=t.trim();return r.length?""+e+r+"|":e},""):t[0]+"|";return new RegExp(r.slice(0,-1),"gi")}(t);r=o.exec(e);)n.push([r.index,r.index+r[0].length]);return n.reverse().reduce(function(e,t){var r=t[0],n=t[1];return e.slice(0,r)+"<strong>"+e.slice(r,n)+"</strong>"+e.slice(n)},e)},exports.html=C,exports.hyphenate=function(e){var t={"ą":"a","ć":"c","ę":"e","ł":"l","ń":"n","ó":"o","ś":"s","ż":"z","ź":"z"," ":"-"};return e.toLowerCase().replace(/[\Wąćęłńóśżź_ ]/g,function(e){return t[e]||""}).replace(/-{2,}/,"-")},exports.importHtml=function e(t){var r=document.querySelector("*[data-import]");if(!r)return t&&t();var n=r.dataset.import;r.removeAttribute("data-import"),fetch(n).then(function(e){if(e.ok)return e.text();throw Error("Cannot import file: "+n)}).then(function(o){r.innerHTML=o,r.dispatchEvent(new CustomEvent("htmlLoaded",{bubbles:!0,detail:{file:n}})),e(t)}).catch(function(n){r.innerHTML='<strong style="color:red;">Cannot import module!</strong>',console.error(n),e(t)})},exports.inDeltaTime=function(e,t){var r,n=0;return function(){(r=new Date)-n<=t&&(e.apply(void 0,[].slice.call(arguments)),r=0),n=r}},exports.inPolygon=function(e,t){for(var r=e[0],n=e[1],o=!1,i=0,a=t.length-1;i<t.length;a=i++){var u=t[i][0],s=t[i][1],c=t[a][1];s>n!=c>n&&r<(t[a][0]-u)*(n-s)/(c-s)+u&&(o=!o)}return o},exports.includeScriptTag=function(e,t){void 0===t&&(t={});var r=t.isModule,n=t.onComplete,o=document.createElement("script");o.setAttribute("type",r?"module":"text/javascript"),n&&o.addEventListener("load",function e(){o.removeEventListener("load",e),n()}),o.setAttribute("src",e),document.head.appendChild(o)},exports.insertNodeAfter=function(e,t){var r=t.nextSibling,n=t.parentNode;return r?n.insertBefore(e,r):n.appendChild(e),e},exports.insertNodeBefore=function(e,t){t.parentNode.insertBefore(e,t)},exports.isObject=e,exports.loop=c,exports.loopstack=function(e){var t,r=0,n=new Array(e);return Object.freeze({push:function(o){o&&(n[r]=o,t=n[r],r=(r+1)%e)},pull:function(){return t=n[r=(r-1+e)%e],n[r]=void 0,t},get:function(e){return n[e]},head:function(){return t},getAll:function(){return n}})},exports.memoElement=function(e,t,r){return void 0===r&&(r=!1),e&&e.classList.add(t),function(n){return r&&e&&e===n?e.classList.toggle(t):(e&&e.classList.remove(t),n&&n.classList.add(t),e=n),e}},exports.moveNodes=function(e,t){for(;e.childNodes.length>0;)t.appendChild(e.firstChild);return t},exports.nodeListToArray=s,exports.objectToFormData=y,exports.placeStrBetween=A,exports.queryToObject=b,exports.reduce=function(e,t,r){for(var n=-1,o=e.length,i=o-1;++n<o;)r=t(r,e[n],n,n===i);return r},exports.schemaTypes=g,exports.shuffleArray=function(e){for(var t,r,n=e.length,o=[].concat(e);0!==n;)r=Math.floor(Math.random()*n),t=o[n-=1],o[n]=o[r],o[r]=t;return o},exports.sortByPhraseIndex=function(e,t,r){void 0===r&&(r=function(e){return e});var n=t.toLowerCase();return[].concat(e).sort(function(e,t){var o=r(e).indexOf(n),i=r(t).indexOf(n);return(o<0?Infinity:o)-(i<0?Infinity:i)})},exports.splitAtIndex=function(e,t){return[e.slice(0,t),e.slice(t)]},exports.throttle=function(e,t){var r,n=this,o=!1;return function(){o||(clearTimeout(r),e.apply(n,[].slice.call(arguments)),o=!0,r=setTimeout(function(){return o=!1},t))}},exports.uid=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})},exports.unEscapeHtml=function(e){var t={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"'};return e.replace(/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34);/g,function(e){return t[e]})},exports.updateQuery=function(e,t){var r="string"==typeof e?b(e):e,n=new URLSearchParams,o=l({},r,t);return Object.keys(o).forEach(function(e){var t=o[e];void 0!==t&&(Array.isArray(t)?t.forEach(function(t){return n.append(e,t)}):("string"!=typeof t||t.length>0)&&n.append(e,t))}),n.toString()},exports.wordCase=function(e){var t=[2,3,4],r=[11,12,13,14];return function(n){return 1===n?e.one:!t.includes(n%10)||r.includes(n)?e.multiple:e.couple}};
